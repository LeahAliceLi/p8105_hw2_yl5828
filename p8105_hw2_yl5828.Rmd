---
title: "p8105_hw2_yl5828"
author: "Leah Li yl5828"
date: "2025-10-01"
output: github_document
editor_options: 
  chunk_output_type: console
---


```{r message = FALSE}
# Load dataset
library(tidyverse)
library(dplyr)
```


## Problem 1

### Clean file pols-month

```{r read and clean pols_month}
pols_month_df =
  read_csv("./fivethirtyeight_datasets/pols-month.csv", na = c("NA", ".", "")) %>%
  janitor::clean_names() %>%
  separate(mon, into = c("year", "month", "day"), sep = "-") %>%
  mutate(
    month=recode(month, `01` ="January", `02`= "February", `03`= "March", `04`= "April", `05`= "May",`06`= "June",`07`= "July",`08`= "August",`09`= "September",`10`= "October",`11`= "November",`12`= "December"),
    president = if_else(prez_gop == 1, "gop", "dem"),
    year = as.numeric(year)
         )%>%
  select(-prez_dem, -prez_gop, -day)

pols_month_df
```

### Clean file snp

```{r read and clean snp}
snp_df =
  read_csv("./fivethirtyeight_datasets/snp.csv", na = c("NA", ".", "")) %>%
  janitor::clean_names() %>%
  separate(date, into = c("month", "day", "year"), sep = "/") %>%
  mutate(
    month=recode(month, `1` ="January", `2`= "February", `3`= "March", `4`= "April", `5`= "May",`6`= "June",`7`= "July",`8`= "August",`9`= "September",`10`= "October",`11`= "November",`12`= "December"),
    year = if_else(year > 25, 1900 + as.numeric(year), 2000 + as.numeric(year)))%>%
  select(year, month, close)

snp_df
```

### Clean file unemployment

```{r read and clean unemployment}
unemployment_df = 
  read_csv("./fivethirtyeight_datasets/unemployment.csv", na = c("NA", ".", "")) %>%
  janitor::clean_names() %>%
  pivot_longer(
    jan:dec,
    names_to = "month", 
    values_to = "unemployment") %>%
  mutate(
    month=recode(month, `jan` ="January", `feb`= "February", `mar`= "March", `apr`= "April", `may`= "May",`jun`= "June",`jul`= "July",`aug`= "August",`sep`= "September",`oct`= "October",`nov`= "November",`dec`= "December" ))

unemployment_df
```

### Join datasets

```{r Join datasets}
q1join_df = 
  inner_join(pols_month_df, snp_df, by = c("year", "month")) %>%
  inner_join(unemployment_df, by = c("year", "month"))

q1join_df
```

### Dataset Explanation

The dataset `pols_month_df` include variables as follows: `r paste(names(pols_month_df), collapse = ", ")`. And the dataset has **`r nrow(pols_month_df) `** rows and **`r ncol (pols_month_df)`** columns. 

The dataset `snp_df` include variables as follows: `r paste(names(snp_df), collapse = ", ")`. And the dataset has **`r nrow(snp_df) `** rows and **`r ncol (snp_df)`** columns. 

The dataset `unemployment_df` include variables as follows: `r paste(names(unemployment_df), collapse = ", ")`. And the dataset has **`r nrow(unemployment_df) `** rows and **`r ncol (unemployment_df)`** columns. 

The resulting dataset `q1join_df` include variables as follows: `r paste(names(q1join_df), collapse = ", ")`. And the dataset has **`r nrow(q1join_df) `** rows and **`r ncol (q1join_df)`** columns. The range of years is (**`r range(q1join_df$year)`**).



## Problem 2

### Clean dataset Mr.Trash Wheel

```{r read and clean Mr.Trash Wheel}
mr.trash_df = 
  readxl::read_excel("./Mr.Trash Wheel/202509 Trash Wheel Collection Data.xlsx", sheet="Mr. Trash Wheel", range="A2:M709", na = c("NA", ".", ""))%>%
  janitor::clean_names() %>%
  filter(!is.na(dumpster)) %>%
  mutate(
    sports_balls = as.integer(round(sports_balls))
  )

mr.trash_df
```

### Clean dataset Professor Trash Wheel

```{r read and clean Professor Wheel}
professor_trash_df = 
  readxl::read_excel("./Mr.Trash Wheel/202509 Trash Wheel Collection Data.xlsx", sheet="Professor Trash Wheel", range="A2:M134", na = c("NA", ".", ""))%>%
  janitor::clean_names() %>%
  filter(!is.na(dumpster))

professor_trash_df
```


















